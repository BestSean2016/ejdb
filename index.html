<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>EJDB by Softmotions</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <script src="javascripts/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1 class="header">EJDB</h1>
        <p class="header">Embedded JSON Database engine</p>

        <ul>
          <li class="download"><a class="buttons" href="https://github.com/Softmotions/ejdb/zipball/master">Download ZIP</a></li>
          <li class="download"><a class="buttons" href="https://github.com/Softmotions/ejdb/tarball/master">Download TAR</a></li>
          <li><a class="buttons github" href="https://github.com/Softmotions/ejdb">View On GitHub</a></li>
        </ul>

        <p class="header">This project is maintained by <a class="header name" href="https://github.com/Softmotions">Softmotions</a></p>


      </header>
      <section>
        <h2>
<a id="ejdb-aims-to-be-a-fast-mongodb-like-library-which-can-be-embedded-into-cc-net-nodejs-python-lua-java-ruby-go-applications-under-terms-of-lgpl-license" class="anchor" href="#ejdb-aims-to-be-a-fast-mongodb-like-library-which-can-be-embedded-into-cc-net-nodejs-python-lua-java-ruby-go-applications-under-terms-of-lgpl-license" aria-hidden="true"><span class="octicon octicon-link"></span></a>EJDB aims to be a fast <a href="http://mongodb.org">MongoDB</a>-like library which can be embedded into C/C++, .Net, NodeJS, Python, Lua, Java, Ruby, Go applications under terms of LGPL license.</h2>

<p>EJDB is the C library based on modified version of <a href="http://fallabs.com/tokyocabinet/">Tokyo Cabinet</a>.
JSON representation of queries and data implemented with API based on <a href="https://github.com/mongodb/mongo-c-driver/tree/master/src/">C BSON</a></p>

<h1>
<a id="news" class="anchor" href="#news" aria-hidden="true"><span class="octicon octicon-link"></span></a>News</h1>

<ul>
<li>
<code>2013-09-20</code> <strong><a href="https://github.com/kyamagu/matlab-ejdb">EJDB Matlab binding from Kota Yamaguchi</a></strong>
</li>
<li>
<code>2013-09-10</code> <strong><a href="https://github.com/Softmotions/ejdb/wiki/V1.1.24">v1.1.24 Fixed incorrect $set behaviour</a></strong>
</li>
<li>
<code>2013-08-19</code> <strong><a href="https://github.com/Softmotions/ejdb/wiki/V1.1.19">v1.1.19 Added support the long awaited mongodb update positional operator</a></strong>
</li>
<li>
<code>2013-08-11</code> <strong><a href="https://github.com/Softmotions/ejdb/wiki/V1.1.18">v1.1.18 Added support for mongodb $ projection</a></strong>
</li>
<li>
<code>2013-08-08</code> <strong><a href="https://github.com/Softmotions/ejdb/issues/81">v1.1.17 Now supported $and &amp; $or mongodb operators</a></strong>
</li>
<li>
<code>2013-07-15</code> <strong><a href="https://github.com/mkilling/goejdb">Google Go binding</a></strong>
</li>
<li>
<code>2013-06-23</code> <strong><a href="https://github.com/Softmotions/ejdb-csharp">C# .Net binding</a></strong>
</li>
<li>
<code>2013-06-02</code> <strong><a href="https://github.com/thejustinwalsh/airejdb">Adobe Air Native Extension (ANE) for EJDB (Thanks to @thejustinwalsh)</a></strong>
</li>
<li>
<code>2013-05-29</code> <strong><a href="https://github.com/Softmotions/ejdb-python">EJDB Python 2.7.x binding available</a></strong>
</li>
<li>
<code>2013-05-06</code> <strong><a href="https://github.com/Softmotions/ejdb-ruby">Ruby binding available</a></strong>
</li>
<li>
<code>2013-05-02</code> <strong><a href="https://github.com/Softmotions/ejdb/blob/master/tcejdb/WIN32.md#ejdb-nodejs-module-installation">NodeJS win32 module available</a></strong>
</li>
<li>
<code>2013-04-25</code> <strong><a href="https://github.com/Softmotions/ejdb/blob/master/tcejdb/WIN32.md">EJDB and TokyoCabinet API ported to Windows</a></strong>
</li>
<li>
<code>2013-04-03</code> <strong><a href="https://github.com/Softmotions/ejdb-java">Java API binding available</a></strong>
</li>
<li>
<code>2013-03-20</code> <strong><a href="https://github.com/Softmotions/ejdb-lua/">Lua binding available</a></strong>
</li>
<li>
<code>2013-02-15</code> <strong><a href="https://github.com/Softmotions/ejdb-python">EJDB Python3 binding available</a></strong>
</li>
<li>
<code>2013-02-07</code> <strong><a href="https://github.com/Softmotions/ejdb/wiki/Debian-Ubuntu-installation">Debian packages provided</a></strong>
</li>
<li>
<code>2013-01-22</code> <strong><a href="https://github.com/Softmotions/ejdb/wiki/Collection-joins">Collection joins now supported</a></strong>
</li>
</ul>

<h1>
<a id="features" class="anchor" href="#features" aria-hidden="true"><span class="octicon octicon-link"></span></a>Features</h1>

<ul>
<li>LGPL license allows you to embed this library into proprietary software.</li>
<li><a href="https://github.com/Softmotions/ejdb/blob/master/tcejdb/WIN32.md">EJDB and TokyoCabinet API ported to Windows</a></li>
<li>MongoDB-like queries and overall philosophy.</li>
<li><a href="https://github.com/Softmotions/ejdb/wiki/Collection-joins">Collection joins</a></li>
<li>Collection level write locking.</li>
<li>Collection level transactions.</li>
<li>Node.js/Python/Lua/Java/Ruby/.Net/Go bindings</li>
<li><a href="https://github.com/thejustinwalsh/airejdb">Adobe Air Native Extension (ANE) for EJDB</a></li>
<li><a href="https://github.com/hww3/pike_modules-ejdb">Pike language binding</a></li>
</ul>

<h1>
<a id="documentation" class="anchor" href="#documentation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Documentation</h1>

<ul>
<li><strong><a href="http://blog.abigopal.com/post/51616277039/ejdb">The brief intro to the EJDB</a></strong></li>
<li><strong><a href="https://github.com/Softmotions/ejdb/wiki/EJDB-Command-line-interface">EJDB Command line interface</a></strong></li>
<li>
<strong><a href="#ejdb-c-library">EJDB C Library</a></strong>

<ul>
<li><a href="#building--installation">Building &amp; Installation</a></li>
<li><a href="#ejdb-c-samples">Samples</a></li>
<li><a href="#c-api">C API</a></li>
</ul>
</li>
<li><strong><a href="https://github.com/Softmotions/ejdb/wiki/Data-Import-Export">Data Import/Export</a></strong></li>
<li><strong><a href="https://github.com/Softmotions/ejdb/wiki/Collection-joins">Collection joins</a></strong></li>
<li><strong><a href="https://github.com/Softmotions/ejdb/wiki/Development-FAQ">Development FAQ</a></strong></li>
<li>
<strong>Bindings</strong>

<ul>
<li><strong><a href="https://github.com/Softmotions/ejdb-csharp">C# .Net</a></strong></li>
<li><strong><a href="https://github.com/Softmotions/ejdb-node">NodeJS</a></strong></li>
<li><strong><a href="https://github.com/Softmotions/ejdb-python">Python 2.7/3.x</a></strong></li>
<li><strong><a href="https://github.com/Softmotions/ejdb-lua/">Lua</a></strong></li>
<li><strong><a href="https://github.com/Softmotions/ejdb-java">Java</a></strong></li>
<li><strong><a href="https://github.com/Softmotions/ejdb-ruby">Ruby</a></strong></li>
<li><strong><a href="https://github.com/johnnyd/EJDBKit">Objective-C</a></strong></li>
<li><strong><a href="https://github.com/mkilling/goejdb/">Go</a></strong></li>
<li><strong><a href="https://github.com/hww3/pike_modules-ejdb">Pike language</a></strong></li>
<li><strong><a href="https://github.com/thejustinwalsh/airejdb">Adobe Air</a></strong></li>
<li><strong><a href="https://github.com/kyamagu/matlab-ejdb">Matlab</a></strong></li>
</ul>
</li>
</ul>

<h1>
<a id="community" class="anchor" href="#community" aria-hidden="true"><span class="octicon octicon-link"></span></a>Community</h1>

<ul>
<li><strong><a href="https://twitter.com/ejdblab">ejdblab@twitter.com</a></strong></li>
<li><strong>We use <a href="http://groups.google.com/group/ejdb">EJDB Google group</a> as our mailing list.</strong></li>
<li><a href="https://github.com/Softmotions/ejdb/wiki/Projects-using-EJDB">Projects using EJDB</a></li>
</ul>

<h1>
<a id="ejdb-nodejs" class="anchor" href="#ejdb-nodejs" aria-hidden="true"><span class="octicon octicon-link"></span></a>EJDB NodeJS</h1>

<h2>
<a id="one-snippet-intro" class="anchor" href="#one-snippet-intro" aria-hidden="true"><span class="octicon octicon-link"></span></a>One snippet intro</h2>

<div class="highlight highlight-JavaScript"><pre><span class="pl-s">var</span> EJDB <span class="pl-k">=</span> <span class="pl-s3">require</span>(<span class="pl-s1"><span class="pl-pds">"</span>ejdb<span class="pl-pds">"</span></span>);
<span class="pl-c">//Open zoo DB</span>
<span class="pl-s">var</span> jb <span class="pl-k">=</span> EJDB.<span class="pl-s3">open</span>(<span class="pl-s1"><span class="pl-pds">"</span>zoo<span class="pl-pds">"</span></span>, EJDB.DEFAULT_OPEN_MODE | EJDB.JBOTRUNC);

<span class="pl-s">var</span> parrot1 <span class="pl-k">=</span> {
    <span class="pl-s1"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span> <span class="pl-k">:</span> <span class="pl-s1"><span class="pl-pds">"</span>Grenny<span class="pl-pds">"</span></span>,
    <span class="pl-s1"><span class="pl-pds">"</span>type<span class="pl-pds">"</span></span> <span class="pl-k">:</span> <span class="pl-s1"><span class="pl-pds">"</span>African Grey<span class="pl-pds">"</span></span>,
    <span class="pl-s1"><span class="pl-pds">"</span>male<span class="pl-pds">"</span></span> <span class="pl-k">:</span> <span class="pl-c1">true</span>,
    <span class="pl-s1"><span class="pl-pds">"</span>age<span class="pl-pds">"</span></span> <span class="pl-k">:</span> <span class="pl-c1">1</span>,
    <span class="pl-s1"><span class="pl-pds">"</span>birthdate<span class="pl-pds">"</span></span> <span class="pl-k">:</span> <span class="pl-k">new</span> <span class="pl-en">Date</span>(),
    <span class="pl-s1"><span class="pl-pds">"</span>likes<span class="pl-pds">"</span></span> <span class="pl-k">:</span> [<span class="pl-s1"><span class="pl-pds">"</span>green color<span class="pl-pds">"</span></span>, <span class="pl-s1"><span class="pl-pds">"</span>night<span class="pl-pds">"</span></span>, <span class="pl-s1"><span class="pl-pds">"</span>toys<span class="pl-pds">"</span></span>],
    <span class="pl-s1"><span class="pl-pds">"</span>extra1<span class="pl-pds">"</span></span> <span class="pl-k">:</span> <span class="pl-c1">null</span>
};
<span class="pl-s">var</span> parrot2 <span class="pl-k">=</span> {
    <span class="pl-s1"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span> <span class="pl-k">:</span> <span class="pl-s1"><span class="pl-pds">"</span>Bounty<span class="pl-pds">"</span></span>,
    <span class="pl-s1"><span class="pl-pds">"</span>type<span class="pl-pds">"</span></span> <span class="pl-k">:</span> <span class="pl-s1"><span class="pl-pds">"</span>Cockatoo<span class="pl-pds">"</span></span>,
    <span class="pl-s1"><span class="pl-pds">"</span>male<span class="pl-pds">"</span></span> <span class="pl-k">:</span> <span class="pl-c1">false</span>,
    <span class="pl-s1"><span class="pl-pds">"</span>age<span class="pl-pds">"</span></span> <span class="pl-k">:</span> <span class="pl-c1">15</span>,
    <span class="pl-s1"><span class="pl-pds">"</span>birthdate<span class="pl-pds">"</span></span> <span class="pl-k">:</span> <span class="pl-k">new</span> <span class="pl-en">Date</span>(),
    <span class="pl-s1"><span class="pl-pds">"</span>likes<span class="pl-pds">"</span></span> <span class="pl-k">:</span> [<span class="pl-s1"><span class="pl-pds">"</span>sugar cane<span class="pl-pds">"</span></span>]
};

jb.save(<span class="pl-s1"><span class="pl-pds">"</span>parrots<span class="pl-pds">"</span></span>, [parrot1, parrot2], <span class="pl-st">function</span>(<span class="pl-vpf">err</span>, <span class="pl-vpf">oids</span>) {
    <span class="pl-k">if</span> (err) {
        <span class="pl-en">console</span><span class="pl-s3">.error</span>(err);
        <span class="pl-k">return</span>;
    }
    <span class="pl-en">console</span><span class="pl-s3">.log</span>(<span class="pl-s1"><span class="pl-pds">"</span>Grenny OID: <span class="pl-pds">"</span></span> <span class="pl-k">+</span> parrot1[<span class="pl-s1"><span class="pl-pds">"</span>_id<span class="pl-pds">"</span></span>]);
    <span class="pl-en">console</span><span class="pl-s3">.log</span>(<span class="pl-s1"><span class="pl-pds">"</span>Bounty OID: <span class="pl-pds">"</span></span> <span class="pl-k">+</span> parrot2[<span class="pl-s1"><span class="pl-pds">"</span>_id<span class="pl-pds">"</span></span>]);

    jb.<span class="pl-s3">find</span>(<span class="pl-s1"><span class="pl-pds">"</span>parrots<span class="pl-pds">"</span></span>,
            {<span class="pl-s1"><span class="pl-pds">"</span>likes<span class="pl-pds">"</span></span> <span class="pl-k">:</span> <span class="pl-s1"><span class="pl-pds">"</span>toys<span class="pl-pds">"</span></span>},
            {<span class="pl-s1"><span class="pl-pds">"</span>$orderby<span class="pl-pds">"</span></span> <span class="pl-k">:</span> {<span class="pl-s1"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span> <span class="pl-k">:</span> <span class="pl-c1">1</span>}},
            <span class="pl-st">function</span>(<span class="pl-vpf">err</span>, <span class="pl-vpf">cursor</span>, <span class="pl-vpf">count</span>) {
                <span class="pl-k">if</span> (err) {
                    <span class="pl-en">console</span><span class="pl-s3">.error</span>(err);
                    <span class="pl-k">return</span>;
                }
                <span class="pl-en">console</span><span class="pl-s3">.log</span>(<span class="pl-s1"><span class="pl-pds">"</span>Found <span class="pl-pds">"</span></span> <span class="pl-k">+</span> count <span class="pl-k">+</span> <span class="pl-s1"><span class="pl-pds">"</span> parrots<span class="pl-pds">"</span></span>);
                <span class="pl-k">while</span> (cursor.<span class="pl-sc">next</span>()) {
                    <span class="pl-en">console</span><span class="pl-s3">.log</span>(cursor.field(<span class="pl-s1"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span>) <span class="pl-k">+</span> <span class="pl-s1"><span class="pl-pds">"</span> likes toys!<span class="pl-pds">"</span></span>);
                }
                cursor.<span class="pl-s3">close</span>(); <span class="pl-c">//It's not mandatory to close cursor explicitly</span>
                jb.<span class="pl-s3">close</span>(); <span class="pl-c">//Close the database</span>
            });
});</pre></div>

<p><strong><a href="https://github.com/Softmotions/ejdb-node">EJDB NodeJS binding page</a></strong></p>

<h1>
<a id="ejdb-python" class="anchor" href="#ejdb-python" aria-hidden="true"><span class="octicon octicon-link"></span></a>EJDB Python</h1>

<h2>
<a id="one-snippet-intro-1" class="anchor" href="#one-snippet-intro-1" aria-hidden="true"><span class="octicon octicon-link"></span></a>One snippet intro</h2>

<div class="highlight highlight-python"><pre><span class="pl-k">import</span> pyejdb
<span class="pl-k">from</span> datetime <span class="pl-k">import</span> datetime

<span class="pl-c">#Open database</span>
ejdb <span class="pl-k">=</span> pyejdb.EJDB(<span class="pl-s1"><span class="pl-pds">"</span>zoo<span class="pl-pds">"</span></span>, pyejdb.DEFAULT_OPEN_MODE <span class="pl-k">|</span> pyejdb.JBOTRUNC)

parrot1 <span class="pl-k">=</span> {
    <span class="pl-s1"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span>: <span class="pl-s1"><span class="pl-pds">"</span>Grenny<span class="pl-pds">"</span></span>,
    <span class="pl-s1"><span class="pl-pds">"</span>type<span class="pl-pds">"</span></span>: <span class="pl-s1"><span class="pl-pds">"</span>African Grey<span class="pl-pds">"</span></span>,
    <span class="pl-s1"><span class="pl-pds">"</span>male<span class="pl-pds">"</span></span>: <span class="pl-c1">True</span>,
    <span class="pl-s1"><span class="pl-pds">"</span>age<span class="pl-pds">"</span></span>: <span class="pl-c1">1</span>,
    <span class="pl-s1"><span class="pl-pds">"</span>birthdate<span class="pl-pds">"</span></span>: datetime.utcnow(),
    <span class="pl-s1"><span class="pl-pds">"</span>likes<span class="pl-pds">"</span></span>: [<span class="pl-s1"><span class="pl-pds">"</span>green color<span class="pl-pds">"</span></span>, <span class="pl-s1"><span class="pl-pds">"</span>night<span class="pl-pds">"</span></span>, <span class="pl-s1"><span class="pl-pds">"</span>toys<span class="pl-pds">"</span></span>],
    <span class="pl-s1"><span class="pl-pds">"</span>extra1<span class="pl-pds">"</span></span>: <span class="pl-c1">None</span>
}
parrot2 <span class="pl-k">=</span> {
    <span class="pl-s1"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span>: <span class="pl-s1"><span class="pl-pds">"</span>Bounty<span class="pl-pds">"</span></span>,
    <span class="pl-s1"><span class="pl-pds">"</span>type<span class="pl-pds">"</span></span>: <span class="pl-s1"><span class="pl-pds">"</span>Cockatoo<span class="pl-pds">"</span></span>,
    <span class="pl-s1"><span class="pl-pds">"</span>male<span class="pl-pds">"</span></span>: <span class="pl-c1">False</span>,
    <span class="pl-s1"><span class="pl-pds">"</span>age<span class="pl-pds">"</span></span>: <span class="pl-c1">15</span>,
    <span class="pl-s1"><span class="pl-pds">"</span>birthdate<span class="pl-pds">"</span></span>: datetime.utcnow(),
    <span class="pl-s1"><span class="pl-pds">"</span>likes<span class="pl-pds">"</span></span>: [<span class="pl-s1"><span class="pl-pds">"</span>sugar cane<span class="pl-pds">"</span></span>],
    <span class="pl-s1"><span class="pl-pds">"</span>extra1<span class="pl-pds">"</span></span>: <span class="pl-c1">None</span>
}
ejdb.save(<span class="pl-s1"><span class="pl-pds">"</span>parrots2<span class="pl-pds">"</span></span>, parrot1, parrot2)

<span class="pl-k">with</span> ejdb.find(<span class="pl-s1"><span class="pl-pds">"</span>parrots2<span class="pl-pds">"</span></span>, {<span class="pl-s1"><span class="pl-pds">"</span>likes<span class="pl-pds">"</span></span> : <span class="pl-s1"><span class="pl-pds">"</span>toys<span class="pl-pds">"</span></span>},
          <span class="pl-vpf">hints</span><span class="pl-k">=</span>{<span class="pl-s1"><span class="pl-pds">"</span>$orderby<span class="pl-pds">"</span></span> : [(<span class="pl-s1"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span>, <span class="pl-c1">1</span>)]}) <span class="pl-k">as</span> cur:
    <span class="pl-k">print</span>(<span class="pl-s1"><span class="pl-pds">"</span>found <span class="pl-c1">%s</span> parrots<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s3">len</span>(cur))
    <span class="pl-k">for</span> p <span class="pl-k">in</span> cur:
        <span class="pl-k">print</span>(<span class="pl-s1"><span class="pl-pds">"</span><span class="pl-c1">%s</span> likes toys!<span class="pl-pds">"</span></span> <span class="pl-k">%</span> p[<span class="pl-s1"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span>])

ejdb.close()</pre></div>

<p><strong><a href="https://github.com/Softmotions/ejdb-python">EJDB Python 2.7/3.x binding page</a></strong></p>

<h1>
<a id="ejdb-lua" class="anchor" href="#ejdb-lua" aria-hidden="true"><span class="octicon octicon-link"></span></a>EJDB Lua</h1>

<h2>
<a id="one-snippet-intro-2" class="anchor" href="#one-snippet-intro-2" aria-hidden="true"><span class="octicon octicon-link"></span></a>One snippet intro</h2>

<div class="highlight highlight-lua"><pre><span class="pl-k">local</span> ejdb <span class="pl-k">=</span> <span class="pl-s3">require</span>(<span class="pl-s1"><span class="pl-pds">"</span>ejdb<span class="pl-pds">"</span></span>)
<span class="pl-k">local</span> inspect <span class="pl-k">=</span> <span class="pl-s3">require</span>(<span class="pl-s1"><span class="pl-pds">"</span>ejdb.inspect<span class="pl-pds">"</span></span>)
<span class="pl-k">local</span> Q <span class="pl-k">=</span> ejdb.<span class="pl-vo">Q</span>

<span class="pl-c">-- Used modes:</span>
<span class="pl-c">-- 'r' - read</span>
<span class="pl-c">-- 'w' - write</span>
<span class="pl-c">-- 'c' - create db if not exists</span>
<span class="pl-c">-- 't' - truncate existing db</span>
<span class="pl-k">local</span> db <span class="pl-k">=</span> ejdb.<span class="pl-s3">open</span>(<span class="pl-s1"><span class="pl-pds">"</span>zoo<span class="pl-pds">"</span></span>, <span class="pl-s1"><span class="pl-pds">"</span>rwct<span class="pl-pds">"</span></span>)

<span class="pl-c">-- Unordered lua table</span>
<span class="pl-k">local</span> parrot1 <span class="pl-k">=</span> {
  name <span class="pl-k">=</span> <span class="pl-s1"><span class="pl-pds">"</span>Grenny<span class="pl-pds">"</span></span>,
  type <span class="pl-k">=</span> <span class="pl-s1"><span class="pl-pds">"</span>African Grey<span class="pl-pds">"</span></span>,
  male <span class="pl-k">=</span> <span class="pl-c1">true</span>,
  age <span class="pl-k">=</span> <span class="pl-c1">1</span>,
  birthhdate <span class="pl-k">=</span> ejdb.<span class="pl-s3">toDateNow</span>(),
  likes <span class="pl-k">=</span> { <span class="pl-s1"><span class="pl-pds">"</span>green color<span class="pl-pds">"</span></span>, <span class="pl-s1"><span class="pl-pds">"</span>night<span class="pl-pds">"</span></span>, <span class="pl-s1"><span class="pl-pds">"</span>toys<span class="pl-pds">"</span></span> },
  extra1 <span class="pl-k">=</span> ejdb.<span class="pl-s3">toNull</span>()
}

<span class="pl-c">-- Preserve order of BSON keys</span>
<span class="pl-k">local</span> parrot2 <span class="pl-k">=</span> <span class="pl-s3">Q</span>();
parrot2:<span class="pl-s3">KV</span>(<span class="pl-s1"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span>, <span class="pl-s1"><span class="pl-pds">"</span>Bounty<span class="pl-pds">"</span></span>):<span class="pl-s3">KV</span>(<span class="pl-s1"><span class="pl-pds">"</span>type<span class="pl-pds">"</span></span>, <span class="pl-s1"><span class="pl-pds">"</span>Cockatoo<span class="pl-pds">"</span></span>):<span class="pl-s3">KV</span>(<span class="pl-s1"><span class="pl-pds">"</span>male<span class="pl-pds">"</span></span>, <span class="pl-c1">false</span>)
parrot2:<span class="pl-s3">KV</span>(<span class="pl-s1"><span class="pl-pds">"</span>age<span class="pl-pds">"</span></span>, <span class="pl-c1">15</span>):<span class="pl-s3">KV</span>(<span class="pl-s1"><span class="pl-pds">"</span>birthdate<span class="pl-pds">"</span></span>,
  ejdb.<span class="pl-s3">toDate</span>({ year <span class="pl-k">=</span> <span class="pl-c1">2013</span>, month <span class="pl-k">=</span> <span class="pl-c1">1</span>, day <span class="pl-k">=</span> <span class="pl-c1">1</span>, hour <span class="pl-k">=</span> <span class="pl-c1">0</span>, sec <span class="pl-k">=</span> <span class="pl-c1">1</span> }))
parrot2:<span class="pl-s3">KV</span>(<span class="pl-s1"><span class="pl-pds">"</span>likes<span class="pl-pds">"</span></span>, { <span class="pl-s1"><span class="pl-pds">"</span>sugar cane<span class="pl-pds">"</span></span> }):<span class="pl-s3">KV</span>(<span class="pl-s1"><span class="pl-pds">"</span>extra1<span class="pl-pds">"</span></span>, ejdb.<span class="pl-s3">toNull</span>())

<span class="pl-c">--IF YOU WANT SOME DATA INSPECTIONS:</span>
<span class="pl-c">--print(ejdb.print_bson(parrot2:toBSON()))</span>
<span class="pl-c">--local obj = ejdb.from_bson(parrot2:toBSON())</span>
<span class="pl-c">--print(inspect(obj));</span>

db:<span class="pl-s3">save</span>(<span class="pl-s1"><span class="pl-pds">"</span>parrots2<span class="pl-pds">"</span></span>, parrot1)
db:<span class="pl-s3">save</span>(<span class="pl-s1"><span class="pl-pds">"</span>parrots2<span class="pl-pds">"</span></span>, parrot2)

<span class="pl-c">-- Below two equivalent queries:</span>
<span class="pl-c">-- Q1</span>
<span class="pl-k">local</span> res, count, log <span class="pl-k">=</span>
db:<span class="pl-s3">find</span>(<span class="pl-s1"><span class="pl-pds">"</span>parrots2<span class="pl-pds">"</span></span>, <span class="pl-s3">Q</span>(<span class="pl-s1"><span class="pl-pds">"</span>likes<span class="pl-pds">"</span></span>, <span class="pl-s1"><span class="pl-pds">"</span>toys<span class="pl-pds">"</span></span>):<span class="pl-s3">OrderBy</span>(<span class="pl-s1"><span class="pl-pds">"</span>name asc<span class="pl-pds">"</span></span>, <span class="pl-s1"><span class="pl-pds">"</span>age desc<span class="pl-pds">"</span></span>))
<span class="pl-k">for</span> i <span class="pl-k">=</span> <span class="pl-c1">1</span>, <span class="pl-k">#</span>res <span class="pl-k">do</span> <span class="pl-c">-- iterate one</span>
  <span class="pl-k">local</span> ob <span class="pl-k">=</span> res:<span class="pl-s3">object</span>(i)
  <span class="pl-s3">print</span>(<span class="pl-s1"><span class="pl-pds">"</span><span class="pl-pds">"</span></span> <span class="pl-k">..</span> ob[<span class="pl-s1"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span>] <span class="pl-k">..</span> <span class="pl-s1"><span class="pl-pds">"</span> likes toys #1<span class="pl-pds">"</span></span>)
<span class="pl-k">end</span>

<span class="pl-c">-- Q2</span>
<span class="pl-k">local</span> res, count, log <span class="pl-k">=</span>
db:<span class="pl-s3">find</span>(<span class="pl-s1"><span class="pl-pds">"</span>parrots2<span class="pl-pds">"</span></span>, <span class="pl-s3">Q</span>():<span class="pl-s3">F</span>(<span class="pl-s1"><span class="pl-pds">"</span>likes<span class="pl-pds">"</span></span>):<span class="pl-s3">Eq</span>(<span class="pl-s1"><span class="pl-pds">"</span>toys<span class="pl-pds">"</span></span>):<span class="pl-s3">OrderBy</span>({ name <span class="pl-k">=</span> <span class="pl-c1">1</span> }, { age <span class="pl-k">=</span> <span class="pl-k">-</span><span class="pl-c1">1</span> }))
<span class="pl-k">for</span> i <span class="pl-k">=</span> <span class="pl-c1">1</span>, <span class="pl-k">#</span>res <span class="pl-k">do</span> <span class="pl-c">-- iterate one</span>
  <span class="pl-s3">print</span>(<span class="pl-s1"><span class="pl-pds">"</span><span class="pl-pds">"</span></span> <span class="pl-k">..</span> res:<span class="pl-s3">field</span>(i, <span class="pl-s1"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span>) <span class="pl-k">..</span> <span class="pl-s1"><span class="pl-pds">"</span> likes toys #2<span class="pl-pds">"</span></span>)
<span class="pl-k">end</span>

<span class="pl-c">-- Second way to iterate</span>
<span class="pl-k">for</span> vobj, idx <span class="pl-k">in</span> <span class="pl-s3">res</span>() <span class="pl-k">do</span>
  <span class="pl-s3">print</span>(<span class="pl-s1"><span class="pl-pds">"</span><span class="pl-pds">"</span></span> <span class="pl-k">..</span> vobj[<span class="pl-s1"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span>] <span class="pl-k">..</span> <span class="pl-s1"><span class="pl-pds">"</span> likes toys #3<span class="pl-pds">"</span></span>)
<span class="pl-k">end</span>

db:<span class="pl-s3">close</span>()</pre></div>

<p><strong><a href="https://github.com/Softmotions/ejdb-lua">EJDB Lua binding page</a></strong></p>

<h1>
<a id="ejdb-go" class="anchor" href="#ejdb-go" aria-hidden="true"><span class="octicon octicon-link"></span></a>EJDB Go</h1>

<h2>
<a id="one-snippet-intro-3" class="anchor" href="#one-snippet-intro-3" aria-hidden="true"><span class="octicon octicon-link"></span></a>One snippet intro</h2>

<div class="highlight highlight-go"><pre><span class="pl-k">package</span> ejdbtutorial

<span class="pl-k">import</span> (
    <span class="pl-s1"><span class="pl-pds">"</span>fmt<span class="pl-pds">"</span></span>
    <span class="pl-s1"><span class="pl-pds">"</span>github.com/mkilling/goejdb<span class="pl-pds">"</span></span>
    <span class="pl-s1"><span class="pl-pds">"</span>labix.org/v2/mgo/bson<span class="pl-pds">"</span></span>
    <span class="pl-s1"><span class="pl-pds">"</span>os<span class="pl-pds">"</span></span>
)

<span class="pl-k">func</span> <span class="pl-en">main</span>() {
    <span class="pl-c">// Create a new database file and open it</span>
    <span class="pl-vo">jb</span>, <span class="pl-vo">err</span> <span class="pl-k">:=</span> goejdb.<span class="pl-s3">Open</span>(<span class="pl-s1"><span class="pl-pds">"</span>addressbook<span class="pl-pds">"</span></span>, JBOWRITER | JBOCREAT | JBOTRUNC)
    <span class="pl-k">if</span> err != <span class="pl-c1">nil</span> {
        os.<span class="pl-s3">Exit</span>(<span class="pl-c1">1</span>)
    }
    <span class="pl-c">// Get or create collection 'contacts'</span>
    <span class="pl-vo">coll</span>, <span class="pl-vo">_</span> <span class="pl-k">:=</span> jb.<span class="pl-s3">CreateColl</span>(<span class="pl-s1"><span class="pl-pds">"</span>contacts<span class="pl-pds">"</span></span>, <span class="pl-c1">nil</span>)

    <span class="pl-c">// Insert one record:</span>
    <span class="pl-c">// JSON: {'name' : 'Bruce', 'phone' : '333-222-333', 'age' : 58}</span>
    <span class="pl-vo">rec</span> <span class="pl-k">:=</span> <span class="pl-s">map</span>[<span class="pl-st">string</span>]<span class="pl-k">interface</span>{} {<span class="pl-s1"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span> : <span class="pl-s1"><span class="pl-pds">"</span>Bruce<span class="pl-pds">"</span></span>, <span class="pl-s1"><span class="pl-pds">"</span>phone<span class="pl-pds">"</span></span> : <span class="pl-s1"><span class="pl-pds">"</span>333-222-333<span class="pl-pds">"</span></span>, <span class="pl-s1"><span class="pl-pds">"</span>age<span class="pl-pds">"</span></span> : <span class="pl-c1">58</span>}
    <span class="pl-vo">bsrec</span>, <span class="pl-vo">_</span> <span class="pl-k">:=</span> bson.<span class="pl-s3">Marshal</span>(rec)
    coll.<span class="pl-s3">SaveBson</span>(bsrec)
    fmt.<span class="pl-s3">Printf</span>(<span class="pl-s1"><span class="pl-pds">"</span><span class="pl-cce">\n</span>Saved Bruce<span class="pl-pds">"</span></span>)

    <span class="pl-c">// Now execute query</span>
    <span class="pl-vo">res</span>, <span class="pl-vo">_</span> <span class="pl-k">:=</span> coll.<span class="pl-s3">Find</span>(<span class="pl-s1"><span class="pl-pds">`</span>{"name" : {"$begin" : "Bru"}}<span class="pl-pds">`</span></span>) <span class="pl-c">// Name starts with 'Bru' string</span>
    fmt.<span class="pl-s3">Printf</span>(<span class="pl-s1"><span class="pl-pds">"</span><span class="pl-cce">\n\n</span>Records found: <span class="pl-c1">%d</span><span class="pl-cce">\n</span><span class="pl-pds">"</span></span>, <span class="pl-s3">len</span>(res))

    <span class="pl-c">// Now print the result set records</span>
    <span class="pl-k">for</span> <span class="pl-vo">_</span>, <span class="pl-vo">bs</span> <span class="pl-k">:=</span> <span class="pl-k">range</span> res {
        <span class="pl-k">var</span> <span class="pl-vo">m</span> <span class="pl-s">map</span>[<span class="pl-st">string</span>]<span class="pl-k">interface</span>{}
        bson.<span class="pl-s3">Unmarshal</span>(bs, &amp;m)
        fmt.<span class="pl-s3">Println</span>(m)
    }

    <span class="pl-c">// Close database</span>
    jb.<span class="pl-s3">Close</span>()
}</pre></div>

<p><strong><a href="https://github.com/mkilling/goejdb">EJDB Go binding page</a></strong></p>

<h1>
<a id="ejdb-ruby" class="anchor" href="#ejdb-ruby" aria-hidden="true"><span class="octicon octicon-link"></span></a>EJDB Ruby</h1>

<h2>
<a id="one-snippet-intro-4" class="anchor" href="#one-snippet-intro-4" aria-hidden="true"><span class="octicon octicon-link"></span></a>One snippet intro</h2>

<div class="highlight highlight-Ruby"><pre><span class="pl-k">require</span> <span class="pl-s1"><span class="pl-pds">"</span>rbejdb<span class="pl-pds">"</span></span>

<span class="pl-c">#Open zoo DB</span>
jb <span class="pl-k">=</span> <span class="pl-s3">EJDB</span>.open(<span class="pl-s1"><span class="pl-pds">"</span>zoo<span class="pl-pds">"</span></span>, <span class="pl-s3">EJDB</span>::<span class="pl-vo">DEFAULT_OPEN_MODE</span> <span class="pl-k">|</span> <span class="pl-s3">EJDB</span>::<span class="pl-vo">JBOTRUNC</span>)

parrot1 <span class="pl-k">=</span> {
    <span class="pl-s1"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span> =&gt; <span class="pl-s1"><span class="pl-pds">"</span>Grenny<span class="pl-pds">"</span></span>,
    <span class="pl-s1"><span class="pl-pds">"</span>type<span class="pl-pds">"</span></span> =&gt; <span class="pl-s1"><span class="pl-pds">"</span>African Grey<span class="pl-pds">"</span></span>,
    <span class="pl-s1"><span class="pl-pds">"</span>male<span class="pl-pds">"</span></span> =&gt; <span class="pl-c1">true</span>,
    <span class="pl-s1"><span class="pl-pds">"</span>age<span class="pl-pds">"</span></span> =&gt; <span class="pl-c1">1</span>,
    <span class="pl-s1"><span class="pl-pds">"</span>birthdate<span class="pl-pds">"</span></span> =&gt; <span class="pl-s3">Time</span>.now,
    <span class="pl-s1"><span class="pl-pds">"</span>likes<span class="pl-pds">"</span></span> =&gt; [<span class="pl-s1"><span class="pl-pds">"</span>green color<span class="pl-pds">"</span></span>, <span class="pl-s1"><span class="pl-pds">"</span>night<span class="pl-pds">"</span></span>, <span class="pl-s1"><span class="pl-pds">"</span>toys<span class="pl-pds">"</span></span>],
    <span class="pl-s1"><span class="pl-pds">"</span>extra1<span class="pl-pds">"</span></span> =&gt; <span class="pl-c1">nil</span>
}
parrot2 <span class="pl-k">=</span> {
    <span class="pl-s1"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span> =&gt; <span class="pl-s1"><span class="pl-pds">"</span>Bounty<span class="pl-pds">"</span></span>,
    <span class="pl-s1"><span class="pl-pds">"</span>type<span class="pl-pds">"</span></span> =&gt; <span class="pl-s1"><span class="pl-pds">"</span>Cockatoo<span class="pl-pds">"</span></span>,
    <span class="pl-s1"><span class="pl-pds">"</span>male<span class="pl-pds">"</span></span> =&gt; <span class="pl-c1">false</span>,
    <span class="pl-s1"><span class="pl-pds">"</span>age<span class="pl-pds">"</span></span> =&gt; <span class="pl-c1">15</span>,
    <span class="pl-s1"><span class="pl-pds">"</span>birthdate<span class="pl-pds">"</span></span> =&gt; <span class="pl-s3">Time</span>.now,
    <span class="pl-s1"><span class="pl-pds">"</span>likes<span class="pl-pds">"</span></span> =&gt; [<span class="pl-s1"><span class="pl-pds">"</span>sugar cane<span class="pl-pds">"</span></span>],
    <span class="pl-s1"><span class="pl-pds">"</span>extra1<span class="pl-pds">"</span></span> =&gt; <span class="pl-c1">nil</span>
}

jb.save(<span class="pl-s1"><span class="pl-pds">"</span>parrots<span class="pl-pds">"</span></span>, parrot1, parrot2)
puts <span class="pl-s1"><span class="pl-pds">"</span>Grenny OID: <span class="pl-pse">#{</span><span class="pl-s2">parrot1[<span class="pl-s1"><span class="pl-pds">"</span>_id<span class="pl-pds">"</span></span>]</span><span class="pl-pse"><span class="pl-s2">}</span></span><span class="pl-pds">"</span></span>
puts <span class="pl-s1"><span class="pl-pds">"</span>Bounty OID: <span class="pl-pse">#{</span><span class="pl-s2">parrot2[<span class="pl-s1"><span class="pl-pds">"</span>_id<span class="pl-pds">"</span></span>]</span><span class="pl-pse"><span class="pl-s2">}</span></span><span class="pl-pds">"</span></span>

results <span class="pl-k">=</span> jb.find(<span class="pl-s1"><span class="pl-pds">"</span>parrots<span class="pl-pds">"</span></span>, {<span class="pl-s1"><span class="pl-pds">"</span>likes<span class="pl-pds">"</span></span> =&gt; <span class="pl-s1"><span class="pl-pds">"</span>toys<span class="pl-pds">"</span></span>}, {<span class="pl-s1"><span class="pl-pds">"</span>$orderby<span class="pl-pds">"</span></span> =&gt; {<span class="pl-s1"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span> =&gt; <span class="pl-c1">1</span>}})

puts <span class="pl-s1"><span class="pl-pds">"</span>Found <span class="pl-pse">#{</span><span class="pl-s2">results.count</span><span class="pl-pse"><span class="pl-s2">}</span></span> parrots<span class="pl-pds">"</span></span>

results.each { |<span class="pl-vo">res</span>|
  puts <span class="pl-s1"><span class="pl-pds">"</span><span class="pl-pse">#{</span><span class="pl-s2">res[<span class="pl-s1"><span class="pl-pds">'</span>name<span class="pl-pds">'</span></span>]</span><span class="pl-pse"><span class="pl-s2">}</span></span> likes toys!<span class="pl-pds">"</span></span>
}

results.close <span class="pl-c">#It's not mandatory to close cursor explicitly</span>
jb.close <span class="pl-c">#Close the database</span>
</pre></div>

<p><strong><a href="https://github.com/Softmotions/ejdb-ruby">EJDB Ruby binding page</a></strong></p>

<h1>
<a id="ejdb-adobe-air" class="anchor" href="#ejdb-adobe-air" aria-hidden="true"><span class="octicon octicon-link"></span></a>EJDB Adobe AIR</h1>

<h2>
<a id="one-snippet-intro-5" class="anchor" href="#one-snippet-intro-5" aria-hidden="true"><span class="octicon octicon-link"></span></a>One snippet intro</h2>

<div class="highlight highlight-as3"><pre><span class="pl-c">// Open the zoo DB</span>
var db:EJDBDatabase = EJDB.open("zoo", EJDB.DEFAULT_OPEN_MODE | EJDB.JBOTRUNC) as EJDBDatabase;

var parrot1:Object = {
    <span class="pl-s1">"name"</span> : <span class="pl-s1">"Grenny"</span>,
    <span class="pl-s1">"type"</span> : <span class="pl-s1">"African Grey"</span>,
    <span class="pl-s1">"male"</span> : true,
    <span class="pl-s1">"age"</span> : 1,
    <span class="pl-s1">"birthdate"</span> : new Date(),
    <span class="pl-s1">"likes"</span> : [<span class="pl-s1">"green color"</span>, <span class="pl-s1">"night"</span>, <span class="pl-s1">"toys"</span>],
    <span class="pl-s1">"extra1"</span> : null
};
var parrot2:Object = {
    <span class="pl-s1">"name"</span> : <span class="pl-s1">"Bounty"</span>,
    <span class="pl-s1">"type"</span> : <span class="pl-s1">"Cockatoo"</span>,
    <span class="pl-s1">"male"</span> : false,
    <span class="pl-s1">"age"</span> : 15,
    <span class="pl-s1">"birthdate"</span> : new Date(),
    <span class="pl-s1">"likes"</span> : [<span class="pl-s1">"sugar cane"</span>]
};

var oids:Array = db.save("parrots", [parrot1, parrot2]);
trace("Grenny OID: " + parrot1._id);
trace("Bounty OID: " + parrot2._id);

var cursor:EJDBCursor = db.find("parrots",
    {<span class="pl-s1">"likes"</span> : <span class="pl-s1">"toys"</span>},
    [],
    {<span class="pl-s1">"$orderby"</span> : {<span class="pl-s1">"name"</span> <span class="pl-k">:</span> <span class="pl-c1">1</span>}}
);

trace("Found " + cursor.length + " parrots");
while (cursor.next()) {
    trace(cursor.field(<span class="pl-s1">"name"</span>) + <span class="pl-s1">" likes toys!"</span>);
}

cursor.close(); <span class="pl-c">// It IS mandatory to close cursor explicitly to free up resources</span>
db.close(); <span class="pl-c">// Close the database</span></pre></div>

<p><strong><a href="https://github.com/thejustinwalsh/airejdb">Adobe Air Native Extension (ANE) for EJDB</a></strong></p>

<h1>
<a id="ejdb-c-library" class="anchor" href="#ejdb-c-library" aria-hidden="true"><span class="octicon octicon-link"></span></a>EJDB C Library</h1>

<h2>
<a id="one-snippet-intro-6" class="anchor" href="#one-snippet-intro-6" aria-hidden="true"><span class="octicon octicon-link"></span></a>One snippet intro</h2>

<div class="highlight highlight-C"><pre>#<span class="pl-k">include</span> <span class="pl-s1"><span class="pl-pds">&lt;</span>tcejdb/ejdb.h<span class="pl-pds">&gt;</span></span>

<span class="pl-s">static</span> EJDB *jb;

<span class="pl-st">int</span> <span class="pl-en">main</span>() {
    jb = <span class="pl-s3">ejdbnew</span>();
    <span class="pl-k">if</span> (!<span class="pl-s3">ejdbopen</span>(jb, <span class="pl-s1"><span class="pl-pds">"</span>addressbook<span class="pl-pds">"</span></span>, JBOWRITER | JBOCREAT | JBOTRUNC)) {
        <span class="pl-k">return</span> <span class="pl-c1">1</span>;
    }
    <span class="pl-c">//Get or create collection 'contacts'</span>
    EJCOLL *coll = <span class="pl-s3">ejdbcreatecoll</span>(jb, <span class="pl-s1"><span class="pl-pds">"</span>contacts<span class="pl-pds">"</span></span>, <span class="pl-c1">NULL</span>);

    bson bsrec;
    <span class="pl-s3">bson_oid_t</span> oid;

    <span class="pl-c">//Insert one record:</span>
    <span class="pl-c">//JSON: {'name' : 'Bruce', 'phone' : '333-222-333', 'age' : 58}</span>
    <span class="pl-s3">bson_init</span>(&amp;bsrec);
    <span class="pl-s3">bson_append_string</span>(&amp;bsrec, <span class="pl-s1"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span>, <span class="pl-s1"><span class="pl-pds">"</span>Bruce<span class="pl-pds">"</span></span>);
    <span class="pl-s3">bson_append_string</span>(&amp;bsrec, <span class="pl-s1"><span class="pl-pds">"</span>phone<span class="pl-pds">"</span></span>, <span class="pl-s1"><span class="pl-pds">"</span>333-222-333<span class="pl-pds">"</span></span>);
    <span class="pl-s3">bson_append_int</span>(&amp;bsrec, <span class="pl-s1"><span class="pl-pds">"</span>age<span class="pl-pds">"</span></span>, <span class="pl-c1">58</span>);
    <span class="pl-s3">bson_finish</span>(&amp;bsrec);
    <span class="pl-c">//Save BSON</span>
    <span class="pl-s3">ejdbsavebson</span>(coll, &amp;bsrec, &amp;oid);
    <span class="pl-s3">fprintf</span>(stderr, <span class="pl-s1"><span class="pl-pds">"</span><span class="pl-cce">\n</span>Saved Bruce<span class="pl-pds">"</span></span>);
    <span class="pl-s3">bson_destroy</span>(&amp;bsrec);

    <span class="pl-c">//Now execute query</span>
    <span class="pl-c">//QUERY: {'name' : {'$begin' : 'Bru'}} //Name starts with 'Bru' string</span>
    bson bq1;
    <span class="pl-s3">bson_init_as_query</span>(&amp;bq1);
    <span class="pl-s3">bson_append_start_object</span>(&amp;bq1, <span class="pl-s1"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span>);
    <span class="pl-s3">bson_append_string</span>(&amp;bq1, <span class="pl-s1"><span class="pl-pds">"</span>$begin<span class="pl-pds">"</span></span>, <span class="pl-s1"><span class="pl-pds">"</span>Bru<span class="pl-pds">"</span></span>);
    <span class="pl-s3">bson_append_finish_object</span>(&amp;bq1);
    <span class="pl-s3">bson_finish</span>(&amp;bq1);

    EJQ *q1 = <span class="pl-s3">ejdbcreatequery</span>(jb, &amp;bq1, <span class="pl-c1">NULL</span>, <span class="pl-c1">0</span>, <span class="pl-c1">NULL</span>);

    <span class="pl-s3">uint32_t</span> count;
    TCLIST *res = <span class="pl-s3">ejdbqryexecute</span>(coll, q1, &amp;count, <span class="pl-c1">0</span>, <span class="pl-c1">NULL</span>);
    <span class="pl-s3">fprintf</span>(stderr, <span class="pl-s1"><span class="pl-pds">"</span><span class="pl-cce">\n\n</span>Records found: <span class="pl-c1">%d</span><span class="pl-cce">\n</span><span class="pl-pds">"</span></span>, count);

    <span class="pl-c">//Now print the result set records</span>
    <span class="pl-k">for</span> (<span class="pl-st">int</span> i = <span class="pl-c1">0</span>; i &lt; <span class="pl-s3">TCLISTNUM</span>(res); ++i) {
        <span class="pl-st">void</span> *bsdata = <span class="pl-s3">TCLISTVALPTR</span>(res, i);
        <span class="pl-s3">bson_print_raw</span>(bsdata, <span class="pl-c1">0</span>);
    }
    <span class="pl-s3">fprintf</span>(stderr, <span class="pl-s1"><span class="pl-pds">"</span><span class="pl-cce">\n</span><span class="pl-pds">"</span></span>);

    <span class="pl-c">//Dispose result set</span>
    <span class="pl-s3">tclistdel</span>(res);

    <span class="pl-c">//Dispose query</span>
    <span class="pl-s3">ejdbquerydel</span>(q1);
    <span class="pl-s3">bson_destroy</span>(&amp;bq1);

    <span class="pl-c">//Close database</span>
    <span class="pl-s3">ejdbclose</span>(jb);
    <span class="pl-s3">ejdbdel</span>(jb);
    <span class="pl-k">return</span> <span class="pl-c1">0</span>;
}</pre></div>

<p>You can save this code in <code>csnippet.c</code> And build:</p>

<div class="highlight highlight-sh"><pre>gcc -std=c99 -Wall -pedantic  -c -o csnippet.o csnippet.c
gcc -o csnippet csnippet.o -ltcejdb</pre></div>

<h2>
<a id="building--installation" class="anchor" href="#building--installation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Building &amp; Installation</h2>

<ul>
<li><a href="https://github.com/Softmotions/ejdb/blob/master/tcejdb/WIN32.md">Installation on windows</a></li>
<li><a href="https://github.com/Softmotions/ejdb/wiki/Debian-Ubuntu-installation">Installation on Debian/Ubuntu</a></li>
</ul>

<h2>
<a id="manual-installation" class="anchor" href="#manual-installation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Manual installation</h2>

<h3>
<a id="prerequisites" class="anchor" href="#prerequisites" aria-hidden="true"><span class="octicon octicon-link"></span></a>Prerequisites</h3>

<p><strong>System libraries:</strong></p>

<ul>
<li>gcc</li>
<li>zlib-dev</li>
</ul>

<h3>
<a id="build-and-install" class="anchor" href="#build-and-install" aria-hidden="true"><span class="octicon octicon-link"></span></a>Build and install</h3>

<div class="highlight highlight-sh"><pre>   <span class="pl-s3">cd</span> ./tcejdb
   ./configure --prefix=<span class="pl-k">&lt;</span>installation prefix<span class="pl-k">&gt;</span> <span class="pl-k">&amp;&amp;</span> make <span class="pl-k">&amp;&amp;</span> make check
   make install</pre></div>

<ul>
<li>library name: <strong>tcejdb</strong> (with pkgconfig)</li>
<li>main include header: <code>&lt;tcejdb/ejdb.h&gt;</code>
</li>
</ul>

<h2>
<a id="c-api" class="anchor" href="#c-api" aria-hidden="true"><span class="octicon octicon-link"></span></a>C API</h2>

<p>EJDB API presented in <strong><a href="https://github.com/Softmotions/ejdb/blob/master/tcejdb/ejdb.h">ejdb.h</a></strong> C header file.</p>

<p>JSON processing API: <strong><a href="https://github.com/Softmotions/ejdb/blob/master/tcejdb/bson.h">bson.h</a></strong></p>

<h2>
<a id="queries" class="anchor" href="#queries" aria-hidden="true"><span class="octicon octicon-link"></span></a>Queries</h2>

<pre><code>/**
 * Create query object.
 * Sucessfully created queries must be destroyed with ejdbquerydel().
 *
 * EJDB queries inspired by MongoDB (mongodb.org) and follows same philosophy.
 *
 *  - Supported queries:
 *      - Simple matching of String OR Number OR Array value:
 *          -   {'fpath' : 'val', ...}
 *      - $not Negate operation.
 *          -   {'fpath' : {'$not' : val}} //Field not equal to val
 *          -   {'fpath' : {'$not' : {'$begin' : prefix}}} //Field not begins with val
 *      - $begin String starts with prefix
 *          -   {'fpath' : {'$begin' : prefix}}
 *      - $gt, $gte (&gt;, &gt;=) and $lt, $lte for number types:
 *          -   {'fpath' : {'$gt' : number}, ...}
 *      - $bt Between for number types:
 *          -   {'fpath' : {'$bt' : [num1, num2]}}
 *      - $in String OR Number OR Array val matches to value in specified array:
 *          -   {'fpath' : {'$in' : [val1, val2, val3]}}
 *      - $nin - Not IN
 *      - $strand String tokens OR String array val matches all tokens in specified array:
 *          -   {'fpath' : {'$strand' : [val1, val2, val3]}}
 *      - $stror String tokens OR String array val matches any token in specified array:
 *          -   {'fpath' : {'$stror' : [val1, val2, val3]}}
 *      - $exists Field existence matching:
 *          -   {'fpath' : {'$exists' : true|false}}
 *      - $icase Case insensitive string matching:
 *          -    {'fpath' : {'$icase' : 'val1'}} //icase matching
 *          Ignore case matching with '$in' operation:
 *          -    {'name' : {'$icase' : {'$in' : ['tHéâtre - театр', 'heLLo WorlD']}}}
 *          For case insensitive matching you can create special index of type: `JBIDXISTR`
 *     - $elemMatch The $elemMatch operator matches more than one component within an array element.
 *          -  { array: { $elemMatch: { value1 : 1, value2 : { $gt: 1 } } } }
 *          Restriction: only one $elemMatch allowed in context of one array field.
 *      - $and, $or joining:
 *          -   {..., $and : [subq1, subq2, ...] }
 *          -   {..., $or  : [subq1, subq2, ...] }
 *          Example: {z : 33, $and : [ {$or : [{a : 1}, {b : 2}]}, {$or : [{c : 5}, {d : 7}]} ] }
 *
 *      - Mongodb $(projection) operator supported. (http://docs.mongodb.org/manual/reference/projection/positional/#proj._S_)
 *      - Mongodb positional $ update operator supported. (http://docs.mongodb.org/manual/reference/operator/positional/)
 *
 *
 *  - Queries can be used to update records:
 *       $set Field set operation.
 *           - {.., '$set' : {'field1' : val1, 'fieldN' : valN}}
 *       $upsert Atomic upsert. If matching records are found it will be '$set' operation,
 *              otherwise new record will be inserted with fields specified by argment object.
 *           - {.., '$upsert' : {'field1' : val1, 'fieldN' : valN}}
 *       $inc Increment operation. Only number types are supported.
 *           - {.., '$inc' : {'field1' : number, ...,  'field1' : number}
 *       $dropall In-place record removal operation.
 *           - {.., '$dropall' : true}
 *       $addToSet Atomically adds value to the array only if its not in the array already.
 *                    If containing array is missing it will be created.
 *           - {.., '$addToSet' : {'fpath' : val1, 'fpathN' : valN, ...}}
 *       $addToSetAll Batch version if $addToSet
 *           - {.., '$addToSetAll' : {'fpath' : [array of values to add], ...}}
 *       $pull Atomically removes all occurrences of value from field, if field is an array.
 *           - {.., '$pull' : {'fpath' : val1, 'fpathN' : valN, ...}}
 *       $pullAll Batch version of $pull
 *           - {.., '$pullAll' : {'fpath' : [array of values to remove], ...}}
 *
 *  NOTE: Negate operations: $not and $nin not using indexes
 *  so they can be slow in comparison to other matching operations.
 *
 *  NOTE: Only one index can be used in search query operation.
 *
 *  QUERY HINTS (specified by `hints` argument):
 *      - $max Maximum number in the result set
 *      - $skip Number of skipped results in the result set
 *      - $orderby Sorting order of query fields.
 *      - $fields Set subset of fetched fields
            If a field presented in $orderby clause it will be forced to include in resulting records.
 *          Example:
 *          hints:    {
 *                      "$orderby" : { //ORDER BY field1 ASC, field2 DESC
 *                          "field1" : 1,
 *                          "field2" : -1
 *                      },
 *                      "$fields" : { //SELECT ONLY {_id, field1, field2}
 *                          "field1" : 1,
 *                          "field2" : 1
 *                      }
 *                    }
 *
 * Many query examples can be found in `testejdb/t2.c` test case.
 *
 * @param EJDB database handle.
 * @param qobj Main BSON query object.
 * @param orqobjs Array of additional OR query objects (joined with OR predicate).
 * @param orqobjsnum Number of OR query objects.
 * @param hints BSON object with query hints.
 * @return On success return query handle. On error returns NULL.
 */
EJDB_EXPORT EJQ* ejdbcreatequery(EJDB *jb, bson *qobj, bson *orqobjs, int orqobjsnum, bson *hints);
</code></pre>

<h2>
<a id="ejdb-c-samples" class="anchor" href="#ejdb-c-samples" aria-hidden="true"><span class="octicon octicon-link"></span></a>EJDB C Samples</h2>

<p>You can find some code samples in:</p>

<ul>
<li><a href="https://github.com/Softmotions/ejdb/tree/master/tcejdb/samples">tcejdb/samples</a></li>
<li><a href="https://github.com/Softmotions/ejdb/tree/master/tcejdb/testejdb">tcejdb/testejdb</a></li>
</ul>

<h2>
<a id="basic-ejdb-architecture" class="anchor" href="#basic-ejdb-architecture" aria-hidden="true"><span class="octicon octicon-link"></span></a>Basic EJDB architecture</h2>

<p><strong>EJDB database files structure</strong></p>

<pre><code>.
├── &lt;dbname&gt;
├── &lt;dbname&gt;_&lt;collection1&gt;
├── ...
├── &lt;dbname&gt;_&lt;collectionN&gt;
└── &lt;dbname&gt;_&lt;collectionN&gt;_&lt;fieldpath&gt;.&lt;index ext&gt;
</code></pre>

<p>Where</p>

<ul>
<li>
<code>&lt;dbname&gt;</code> - name of database. It is metadata DB.</li>
<li>
<code>&lt;collectionN&gt;</code> - name of collection. Collection database.</li>
<li>
<code>&lt;fieldpath&gt;</code> - JSON field path used in index</li>
<li>
<code>&lt;index ext&gt;</code> - Collection index extension:

<ul>
<li>
<code>.lex</code> String index</li>
<li>
<code>.dec</code> Number index</li>
<li>
<code>.tok</code> Array index</li>
</ul>
</li>
</ul>

<h2>
<a id="limitations" class="anchor" href="#limitations" aria-hidden="true"><span class="octicon octicon-link"></span></a>Limitations</h2>

<ul>
<li>One ejdb database can handle up to 1024 collections.</li>
<li>Indexes for objects in nested arrays currently not supported (#37)</li>
</ul>

<h2>
<a id="todo" class="anchor" href="#todo" aria-hidden="true"><span class="octicon octicon-link"></span></a>TODO</h2>

<ul>
<li>Collect collection index statistic</li>
</ul>
      </section>
      <footer>
        <p><small>Hosted on <a href="http://pages.github.com">GitHub Pages</a> using the Dinky theme</small></p>
      </footer>
    </div>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
		          <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-36241306-1");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>
